<!DOCTYPE html>
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<script>
var markerFound = 0;

AFRAME.registerComponent("hider-material", {
  init: function () {
    this.el.addEventListener('model-loaded', this.update.bind(this));
  },
  update: function () {
    this.el.object3D.traverse(function (child) {
      if (child.isMesh) {
        child.material.colorWrite = false;
      }
    });
  }
});
</script>

<link rel="stylesheet" href="style.css">
<body id="bodies" style='margin : 0px; overflow: hidden; font-family: Monospace;'>
  <div class="camload">
      <p> Please wait for the Camera to turn on.</p>
  </div>
  <div class="loader">
      <image src="Loading gif.gif" alt="loading..." />
  </div>
  <a-scene embedded arjs='debugUIEnabled: false; sourceType: webcam' vr-mode-ui='enabled: false'>
  <a-assets>
    <a-asset-item id="portalhider" src="models/portalhider.glb"></a-asset-item>
    <a-asset-item id="portal" src="models/portal.glb"></a-asset-item>
  </a-assets>
    <a-marker id="marker" preset="hiro" emitevents="true" button>
      <a-entity gltf-model="#portalhider" src="models/portalhider.glb" rotation="-90 0 0" hider-material></a-entity>
      <a-entity gltf-model="#portal" src="models/portal.glb" rotation="-90 0 0"></a-entity>
      <a-entity light="type: ambient; color: #BBB intensity:0.3"></a-entity>

    </a-marker>
    <a-entity light="type: ambient; color: #FFF intensity:2"></a-entity>
    <a-entity camera></a-entity>
  </a-scene>
</body>
<script type="text/javascript">
    window.addEventListener("load", function() {
        const loader = document.querySelector(".loader");
        loader.className += " hidden";
    });
</script>
</html>